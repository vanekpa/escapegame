 {/* konkrétní vstup */}
                        {L.mode === "numeric" && <NumericLock lock={L} onDone={onDone} />}
                        {L.mode === "text" && <TextLock lock={L} onDone={onDone} />}
                        {L.mode === "arrows" && <ArrowsLock lock={L} onDone={onDone} />}
                        {L.mode === "colors" && <ColorsLock lock={L} assets={assets} onDone={onDone} />}
                        {L.mode === "shapes" && <ShapesLock lock={L} assets={assets} onDone={onDone} />}
                        {L.mode === "cryptex" && <CryptexLock lock={L} assets={{ keyboards: (assets?.keyboards||{}), ...assets }} onDone={onDone} />}
                        {L.mode === "quiz" && <QuizLock lock={L} onDone={onDone} />}
                        {(!L.mode || L.mode === "default") && <TextLock lock={L} onDone={onDone} />}
                    </div>
                </div>
            );
        }

        // Text Lock Component
        function TextLock({ lock, onDone, readonly = false, preset = "" }) {
            const [val, setVal] = useState("");
            
            function submit() {
                const answer = String(lock.answer ?? "");
                const caseSensitive = !!lock.input?.case_sensitive;
                const isCorrect = caseSensitive ? 
                    val === answer : 
                    val.toUpperCase() === answer.toUpperCase();
                onDone(isCorrect);
                setVal("");
            }
            
            function handleKeyPress(e) {
                if (e.key === 'Enter') {
                    submit();
                }
            }
            
            return (
                <div className="space-y-3">
                    <input 
                        value={val} 
                        onChange={e => setVal(e.target.value)}
                        onKeyPress={handleKeyPress}
                        className="w-full p-3 rounded-xl bg-white text-black placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow" 
                        placeholder={lock.input?.placeholder || "Zadej odpověď"}
                        autoFocus
                    />
                    <div className="flex justify-center">
                        <button 
                            onClick={submit} 
                            disabled={!val.trim()}
                            className="px-6 py-2 rounded-xl bg-emerald-500 hover:bg-emerald-600 disabled:bg-gray-500 disabled:cursor-not-allowed text-white font-semibold transition-colors shadow"
                        >
                            Odemknout
                        </button>
                    </div>
                </div>
            );
        }

        // Soft Keyboard Component
        function SoftKeyboard({ variant, onKey, extras }) {
            const DEFAULTS = {
                colors: ["red","orange","yellow","green","blue","purple","pink","brown"],
                shapes: ["◯","■","▲","★","❤","◆"]
            };

            if (variant === "colors") {
                const palette = extras?.colors?.length ? extras.colors : DEFAULTS.colors;
                const showNames = !!extras?.show_names;
                return (
                    <div className="flex flex-wrap justify-center gap-3">
                        {palette.map(c => (
                            <button key={c} onClick={() => onKey(c)}
                                className="flex flex-col items-center gap-1 px-2 